(this["webpackJsonpd3js-tutorial"]=this["webpackJsonpd3js-tutorial"]||[]).push([[0],{198:function(t,e,n){},201:function(t,e,n){"use strict";n.r(e);var a=n(3),c=n.n(a),r=n(73),i=n.n(r),s=n(11),o=n(5),l=n(74),d=(n(198),n(2)),u=n(0),h=function(t){var e=t.xScale,n=t.xLength,a=t.filterCondition,c=t.bandwidthOffset,r=void 0===c?0:c,i=t.yOffset,s=void 0===i?0:i,o=t.axisLine,l=void 0!==o&&o,d=t.tickFormat,h=e.domain().filter(a).map((function(t){return Object(u.jsxs)("g",{className:"axis",transform:"translate(".concat(e(t),",0)"),children:[l&&Object(u.jsx)("line",{y2:s}),Object(u.jsx)("line",{className:"tick",y1:s,y2:s+6}),Object(u.jsx)("text",{style:{textAnchor:"middle"},dy:".71em",y:s+14,children:d(t)})]},t)}));return Object(u.jsxs)(u.Fragment,{children:[h,Object(u.jsx)("line",{className:"axis-border",y1:s,y2:s,x1:-r,x2:n+r})]})},j=function(t){var e=t.yScale,n=t.yLength,a=t.xOffset,c=void 0===a?0:a,r=t.numTicks,i=void 0===r?null:r,s=t.tickFormat,o=e.ticks(i).map((function(t){return Object(u.jsxs)("g",{className:"axis",transform:"translate(0,".concat(e(t),")"),children:[Object(u.jsx)("line",{className:"tick",x1:c-6,x2:c}),Object(u.jsx)("text",{style:{textAnchor:"end"},x:c-12,dy:".32em",children:s(t)})]},t)}));return Object(u.jsxs)(u.Fragment,{children:[o,Object(u.jsx)("line",{className:"axis-border",x1:c,x2:c,y2:n})]})},x=function(t){var e=t.yScale,n=t.yLength,a=t.xOffset,c=void 0===a?0:a,r=t.numTicks,i=void 0===r?null:r,s=t.tickFormat,o=e.ticks(i).map((function(t){return Object(u.jsxs)("g",{className:"axis",transform:"translate(0,".concat(e(t),")"),children:[Object(u.jsx)("line",{className:"tick",x1:c+6,x2:c}),Object(u.jsx)("text",{style:{textAnchor:"start"},x:c+12,dy:".32em",children:s(t)})]},t)}));return Object(u.jsxs)(u.Fragment,{children:[o,Object(u.jsx)("line",{className:"axis-border",x1:c,x2:c,y2:n})]})},f=Object(d.m)("%B %-d, %Y"),b=Object(d.e)(".2f"),m=Object(d.e)(".3s"),g=function(t){var e=t.data,n=t.xScale,a=t.yScale;return e.map((function(t){return Object(u.jsxs)("g",{className:"candlestick-mark",transform:"translate(".concat(n(t.date),",0)"),children:[Object(u.jsx)("line",{y1:a(t.low),y2:a(t.high)}),Object(u.jsx)("line",{y1:a(t.open),y2:a(t.close),strokeWidth:n.bandwidth(),stroke:t.open>t.close?d.j[0]:t.close>t.open?d.j[2]:d.j[8],"data-tip":"<b>".concat(f(t.date),"</b><br />")+"Open: $".concat(b(t.open),"<br />")+"Close: $".concat(b(t.close),"<br />")+"Low: $".concat(b(t.low),"<br />")+"High: $".concat(b(t.high),"<br />")+"Volume: ".concat(m(t.volume)),"data-for":"mark-tooltip"})]},t.date)}))},O=function(t){var e=t.data,n=t.xScale,a=t.yScale,c=t.innerHeight;return e.map((function(t){return Object(u.jsx)("rect",{className:"volume-mark",x:n(t.date)-n.bandwidth()/2,y:a(t.volume),width:n.bandwidth(),height:c-a(t.volume)},t.date)}))},y=d.e("$~f"),p=d.e("~s"),v=d.m("%-m/%-d"),k=function(t){var e=t.data,n=t.specs,a=n.width,c=n.height,r=n.margin,i=n.yAxisLabelOffset,s=a-r.left-r.right,o=c-r.top-r.bottom,l=d.h().domain(d.l.range(e[0].date,+e[e.length-1].date+1).filter((function(t){return 0!==t.getUTCDay()&&6!==t.getUTCDay()}))).range([0,s]).padding(.2),f=d.i().domain([d.g(e,(function(t){return t.low})),d.f(e,(function(t){return t.high}))]).rangeRound([o,0]).nice(),b=d.i().domain([0,d.f(e,(function(t){return t.volume}))]).rangeRound([o,0]).nice();return Object(u.jsxs)("g",{transform:"translate(".concat(r.left,",").concat(r.top,")"),children:[Object(u.jsx)(h,{xScale:l,xLength:s,filterCondition:function(t){return 1===t.getUTCDay()},yOffset:o,bandwidthOffset:l.bandwidth()/2,axisLine:!0,tickFormat:v}),Object(u.jsx)(j,{yScale:f,yLength:o,xOffset:-l.bandwidth()/2,tickFormat:y}),Object(u.jsx)("text",{className:"axis-label",textAnchor:"middle",transform:"translate(".concat(-i,",").concat(o/2,") rotate(-90)"),children:"Price"}),Object(u.jsx)(x,{yScale:b,yLength:o,xOffset:s+l.bandwidth()/2,tickFormat:p}),Object(u.jsx)("text",{className:"axis-label",textAnchor:"middle",transform:"translate(".concat(s+i,",").concat(o/2,") rotate(90)"),children:"Volume"}),Object(u.jsx)(O,{data:e,xScale:l,yScale:b,innerHeight:o}),Object(u.jsx)(g,{data:e,xScale:l,yScale:f})]})},S=function(t){var e=t.data,n=t.xScale,a=t.yScale;return Object(u.jsx)("path",{className:"line-mark",d:Object(d.a)().x((function(t){return n(t.date)})).y0(a(0)).y1((function(t){return a(t.close)})).curve(d.d)(e)})},w=d.e("$~f"),L=d.m("%Y"),F=function(t){var e=t.data,n=t.specs,c=n.width,r=n.height,i=n.margin,s=n.yAxisNumTicks,o=n.yAxisLabelOffset,l=t.initialBrushExtent,x=t.setBrushExtent,f=Object(a.useRef)(),b=c-i.left-i.right,m=r-i.top-i.bottom,g=Object(a.useMemo)((function(){return d.h().domain(d.l.range(e[0].date,+e[e.length-1].date+1).filter((function(t){return 0!==t.getUTCDay()&&6!==t.getUTCDay()}))).range([0,b]).padding(.2)}),[e,b]),O=Object(a.useMemo)((function(){return d.i().domain([0,d.f(e,(function(t){return t.high}))]).range([m,0]).nice()}),[e,m]);Object(a.useEffect)((function(){var t=d.b().extent([[0,0],[b,m]]).on("brush",(function(t){x(t.selection&&t.selection.map(function(t){var e=t.domain(),n=t(e[0]),a=t.step();return function(t){var c=Math.floor((t-n)/a);return e[Math.max(0,Math.min(c,e.length-1))]}}(g)))})),e=d.k(f.current);t(e),t.move(e,[g(l[0]),g(l[1])])}),[g,b,m]);return Object(u.jsxs)("g",{transform:"translate(".concat(i.left,",").concat(i.top,")"),children:[Object(u.jsx)(S,{data:e,xScale:g,yScale:O}),Object(u.jsx)(h,{xScale:g,xLength:b,yOffset:m,filterCondition:function(t){return 1===t.getUTCDay()&&t.getUTCDate()<=7&&0===t.getUTCMonth()},tickFormat:L}),Object(u.jsx)(j,{yScale:O,yLength:m,numTicks:s,tickFormat:w}),Object(u.jsx)("text",{className:"axis-label",textAnchor:"middle",transform:"translate(".concat(-o,",").concat(m/2,") rotate(-90)"),children:"Price"}),Object(u.jsx)("g",{ref:f})]})},N=function(t){var e=t.specs,n=e.totalWidth,c=e.totalHeight,r=e.seperationRatio,i=e.brushSpecs,h=e.candlestickSpecs,j=function(){var t=Object(a.useState)(null),e=Object(o.a)(t,2),n=e[0],c=e[1];return Object(a.useEffect)((function(){Object(d.c)("https://gist.githubusercontent.com/alvin-yang68/825378ee22558f0ced78a2ca74c931a7/raw/AAPLStockHistory.csv",(function(t){return t.date=new Date(t.date),t.volume=+t.volume,t.open=+t.open,t.close=+t.close,t.high=+t.high,t.low=+t.low,t})).then(c)}),[]),n}(),x=Object(a.useState)(),f=Object(o.a)(x,2),b=f[0],m=f[1];if(!j)return Object(u.jsx)("pre",{children:"Loading..."});h=Object(s.a)(Object(s.a)({},h),{},{width:n,height:c*r}),i=Object(s.a)(Object(s.a)({},i),{},{width:n,height:c*(1-r)});var g=[j[j.length-i.brushSize].date,j[j.length-1].date],O=b?j.filter((function(t){return t.date>b[0]&&t.date<b[1]})):j.filter((function(t){return t.date>g[0]&&t.date<g[1]}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("svg",{width:n,height:c,children:[Object(u.jsx)(k,{data:O,specs:h}),Object(u.jsx)("g",{transform:"translate(0,".concat(c*r,")"),children:Object(u.jsx)(F,{data:j,specs:i,initialBrushExtent:g,setBrushExtent:m})})]}),Object(u.jsx)(l.a,{id:"mark-tooltip",place:"right",effect:"solid",html:!0})]})};var C=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(N,{specs:{totalWidth:1200,totalHeight:750,seperationRatio:.8,brushSpecs:{brushSize:130,margin:{top:20,right:80,bottom:40,left:80},yAxisNumTicks:5,yAxisLabelOffset:60},candlestickSpecs:{margin:{top:20,right:80,bottom:40,left:80},yAxisLabelOffset:60}}})})},T=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,203)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),r(t),i(t)}))};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(C,{})}),document.getElementById("root")),T()}},[[201,1,2]]]);
//# sourceMappingURL=main.f06b3597.chunk.js.map